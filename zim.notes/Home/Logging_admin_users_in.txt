Content-Type: text/x-zim-wiki
Wiki-Format: zim 0.4
Creation-Date: 2011-01-10T20:48:47.673356

====== Logging Admin Users In ======
1) Generate a controller called **Admin **with actions 'login', 'logout' and 'index'

2) Create a form_tag (non-model-associated form) with //params[:name]// and //params[:password]//

<div class="depot-form">
  <% **form_tag** do %>														<<- this means not associated w/ model (form_for is with model)
    <fieldset>
      <legend>Please Log In</legend>

      <div>
        <label for="Name">Name</label>
        <%= __text_field_tag__ :name, __params[:name]__ %>
      </div>

      <div>
        <label for="password">Password</label>
        <%= __password_field_tag__ :password, __params[:password]__ %>
      </div>

      <div>
        <%= submit_tag "Login" %>
      </div>
    </fieldset>
  <% end %>
</div>

These params are passed on to the login method in the controller:

class AdminController < ApplicationController
  def login
    **if request.post?**															<<- give the people time to press 'login' button
      user = User.authenticate(params[:name], params[:password])		<<- this was def. in the User model
      if user
        session[:user_id] = user.id												<<- store the user's id in the session
        redirect_to(:action => :index)
      else
        flash.now[:notice] = "Invalid user/password combination"			
      end
    end
  end




